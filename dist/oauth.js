!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={};function r(e){return e&&e.constructor===Symbol?"symbol":typeof e}
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/t=function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var c=void 0;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=t[a]={exports:{}};n[a][0].call(s.exports,(function(e){var t=n[a][1][e];return o(t||e)}),s,s.exports,e,n,t,r)}return t[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,r){(function(e){"use strict";var n,r,o=function(){var e,n;r=!0;for(var t=l.length;t;){for(n=l,l=[],e=-1;++e<t;)n[e]();t=l.length}r=!1},i=function(e){1!==l.push(e)||r||n()},a=e.MutationObserver||e.WebKitMutationObserver;if(a){var u=0,c=new a(o),f=e.document.createTextNode("");c.observe(f,{characterData:!0}),n=function(){f.data=u=++u%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){o(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(o,0)};else{var s=new e.MessageChannel;s.port1.onmessage=o,n=function(){s.port2.postMessage(0)}}var l=[];t.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,t){"use strict";var r=function(){},o=function(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,e!==r&&c(this,e)},i=function(e,n,t){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)},a=function(e,n,t){h((function(){var r;try{r=n(t)}catch(n){return p.reject(e,n)}r===e?p.reject(e,new TypeError("Cannot resolve promise with itself")):p.resolve(e,r)}))},u=function(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}},c=function(e,n){var t=!1;function r(n){t||(t=!0,p.reject(e,n))}function o(n){t||(t=!0,p.resolve(e,n))}function i(){n(o,r)}var a=f(i);"error"===a.status&&r(a.value)},f=function(e,n){var t={};try{t.value=e(n),t.status="success"}catch(e){t.status="error",t.value=e}return t},s=function(e){return e instanceof this?e:p.resolve(new this(r),e)},l=function(e){var n=new this(r);return p.reject(n,e)},d=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,o=!1;if(!t)return this.resolve([]);for(var i=new Array(t),a=0,u=-1,c=new this(r);++u<t;)f(e[u],u);return c;function f(e,r){function u(e){i[r]=e,++a!==t||o||(o=!0,p.resolve(c,i))}n.resolve(e).then(u,(function(e){o||(o=!0,p.reject(c,e))}))}},v=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,o=!1;if(!t)return this.resolve([]);for(var i=-1,a=new this(r);++i<t;)u(e[i]);return a;function u(e){n.resolve(e).then((function(e){o||(o=!0,p.resolve(a,e))}),(function(e){o||(o=!0,p.reject(a,e))}))}},h=e(1),p={},y=["REJECTED"],b=["FULFILLED"],m=["PENDING"];n.exports=o,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,n){if("function"!=typeof e&&this.state===b||"function"!=typeof n&&this.state===y)return this;var t=new this.constructor(r);if(this.state!==m){var o=this.state===b?e:n;a(t,o,this.outcome)}else this.queue.push(new i(t,e,n));return t},i.prototype.callFulfilled=function(e){p.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){p.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},p.resolve=function(e,n){var t=f(u,n);if("error"===t.status)return p.reject(e,t.value);var r=t.value;if(r)c(e,r);else{e.state=b,e.outcome=n;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(n)}return e},p.reject=function(e,n){e.state=y,e.outcome=n;for(var t=-1,r=e.queue.length;++t<r;)e.queue[t].callRejected(n);return e},o.resolve=s,o.reject=l,o.all=d,o.race=v},{1:1}],3:[function(e,t,r){(function(n){"use strict";"function"!=typeof n.Promise&&(n.Promise=e(2))}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,n,t){"use strict";var o=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}},a=function(){try{if(!ge||!ge.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||n)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}},u=function(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(o){if("TypeError"!==o.name)throw o;for(var t=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)t.append(e[r]);return t.getBlob(n.type)}},c=function(e,n){n&&e.then((function(e){n(null,e)}),(function(e){n(e)}))},f=function(e,n,t){"function"==typeof n&&e.then(n),"function"==typeof t&&e.catch(t)},s=function(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e},l=function(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]},d=function(e){for(var n=e.length,t=new ArrayBuffer(n),r=new Uint8Array(t),o=0;o<n;o++)r[o]=e.charCodeAt(o);return t},v=function(e){return new _e((function(n){var t=e.transaction(we,je),r=u([""]);t.objectStore(we).put(r,"key"),t.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},t.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))},h=function(e){return"boolean"==typeof Ie?_e.resolve(Ie):v(e).then((function(e){return Ie=e}))},p=function(e){var n=Se[e.name],t={};t.promise=new _e((function(e,n){t.resolve=e,t.reject=n})),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then((function(){return t.promise})):n.dbReady=t.promise},y=function(e){var n=Se[e.name].deferredOperations.pop();if(n)return n.resolve(),n.promise},b=function(e,n){var t=Se[e.name].deferredOperations.pop();if(t)return t.reject(n),t.promise},m=function(e,n){return new _e((function(t,r){if(Se[e.name]=Se[e.name]||O(),e.db){if(!n)return t(e.db);p(e),e.db.close()}var o=[e.name];n&&o.push(e.version);var i=ge.open.apply(ge,o);n&&(i.onupgradeneeded=function(n){var t=i.result;try{t.createObjectStore(e.storeName),n.oldVersion<=1&&t.createObjectStore(we)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+e.name+'" has been upgraded from version '+n.oldVersion+" to version "+n.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var n=i.result;n.onversionchange=function(e){e.target.close()},t(n),y(e)}}))},g=function(e){return m(e,!1)},_=function(e){return m(e,!0)},w=function(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==n&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||t){if(t){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1},I=function(e){return new _e((function(n,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))},S=function(e){var n=d(atob(e.data));return u([n],{type:e.type})},E=function(e){return e&&e.__local_forage_encoded_blob},N=function(e){var n=this,t=n._initReady().then((function(){var e=Se[n._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(t,e,e),t},j=function(e){p(e);for(var n=Se[e.name],t=n.forages,r=0;r<t.length;r++){var o=t[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,g(e).then((function(n){return e.db=n,w(e)?_(e):n})).then((function(r){e.db=n.db=r;for(var o=0;o<t.length;o++)t[o]._dbInfo.db=r})).catch((function(n){throw b(e,n),n}))},O=function(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}},R=function(e){var n=this,t={db:null};if(e)for(var r in e)t[r]=e[r];var o=Se[t.name];o||(o=O(),Se[t.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=N);var i=[];function a(){return _e.resolve()}for(var u=0;u<o.forages.length;u++){var c=o.forages[u];c!==n&&i.push(c._initReady().catch(a))}var f=o.forages.slice(0);return _e.all(i).then((function(){return t.db=o.db,g(t)})).then((function(e){return t.db=e,w(t,n._defaultConfig.version)?_(t):e})).then((function(e){t.db=o.db=e,n._dbInfo=t;for(var r=0;r<f.length;r++){var i=f[r];i!==n&&(i._dbInfo.db=t.db,i._dbInfo.version=t.version)}}))},A=function(e,n){var t=this;e=s(e);var r=new _e((function(n,r){t.ready().then((function(){Oe(t._dbInfo,Ne,(function(o,i){if(o)return r(o);try{var a=i.objectStore(t._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),E(e)&&(e=S(e)),n(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,n),r},D=function(e,n){var t=this,r=new _e((function(n,r){t.ready().then((function(){Oe(t._dbInfo,Ne,(function(o,i){if(o)return r(o);try{var a=i.objectStore(t._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var t=a.result;if(t){var r=t.value;E(r)&&(r=S(r));var o=e(r,t.key,u++);void 0!==o?n(o):t.continue()}else n()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,n),r},k=function(e,n,t){var r=this;e=s(e);var o=new _e((function(t,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===Ee.call(n)?h(i.db).then((function(e){return e?n:I(n)})):n})).then((function(n){Oe(r._dbInfo,je,(function(i,a){if(i)return o(i);try{var u=a.objectStore(r._dbInfo.storeName);null===n&&(n=void 0);var c=u.put(n,e);a.oncomplete=function(){void 0===n&&(n=null),t(n)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return c(o,t),o},x=function(e,n){var t=this;e=s(e);var r=new _e((function(n,r){t.ready().then((function(){Oe(t._dbInfo,je,(function(o,i){if(o)return r(o);try{var a=i.objectStore(t._dbInfo.storeName).delete(e);i.oncomplete=function(){n()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,n),r},T=function(e){var n=this,t=new _e((function(e,t){n.ready().then((function(){Oe(n._dbInfo,je,(function(r,o){if(r)return t(r);try{var i=o.objectStore(n._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;t(e)}}catch(e){t(e)}}))})).catch(t)}));return c(t,e),t},B=function(e){var n=this,t=new _e((function(e,t){n.ready().then((function(){Oe(n._dbInfo,Ne,(function(r,o){if(r)return t(r);try{var i=o.objectStore(n._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){t(i.error)}}catch(e){t(e)}}))})).catch(t)}));return c(t,e),t},C=function(e,n){var t=this,r=new _e((function(n,r){e<0?n(null):t.ready().then((function(){Oe(t._dbInfo,Ne,(function(o,i){if(o)return r(o);try{var a=i.objectStore(t._dbInfo.storeName),u=!1,c=a.openKeyCursor();c.onsuccess=function(){var t=c.result;t?0===e||u?n(t.key):(u=!0,t.advance(e)):n(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,n),r},L=function(e){var n=this,t=new _e((function(e,t){n.ready().then((function(){Oe(n._dbInfo,Ne,(function(r,o){if(r)return t(r);try{var i=o.objectStore(n._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var n=i.result;n?(a.push(n.key),n.continue()):e(a)},i.onerror=function(){t(i.error)}}catch(e){t(e)}}))})).catch(t)}));return c(t,e),t},F=function(e,n){n=l.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var r,o=this;if(e.name){var i=e.name===t.name&&o._dbInfo.db?_e.resolve(o._dbInfo.db):g(e).then((function(n){var t=Se[e.name],r=t.forages;t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n;return n}));r=e.storeName?i.then((function(n){if(n.objectStoreNames.contains(e.storeName)){var t=n.version+1;p(e);var r=Se[e.name],o=r.forages;n.close();for(var i=0;i<o.length;i++){var a=o[i];a._dbInfo.db=null,a._dbInfo.version=t}return new _e((function(n,r){var o=ge.open(e.name,t);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),n(e)}})).then((function(e){r.db=e;for(var n=0;n<o.length;n++){var t=o[n];t._dbInfo.db=e,y(t._dbInfo)}})).catch((function(n){throw(b(e,n)||_e.resolve()).catch((function(){})),n}))}})):i.then((function(n){p(e);var t=Se[e.name],r=t.forages;n.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new _e((function(n,t){var r=ge.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),t(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),n(e)}})).then((function(e){t.db=e;for(var n=0;n<r.length;n++){var o=r[n];y(o._dbInfo)}})).catch((function(n){throw(b(e,n)||_e.resolve()).catch((function(){})),n}))}))}else r=_e.reject("Invalid arguments");return c(r,n),r},M=function(){return"function"==typeof openDatabase},z=function(e){var n,t,r,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),s=new Uint8Array(f);for(n=0;n<u;n+=4)t=Ae.indexOf(e[n]),r=Ae.indexOf(e[n+1]),o=Ae.indexOf(e[n+2]),i=Ae.indexOf(e[n+3]),s[c++]=t<<2|r>>4,s[c++]=(15&r)<<4|o>>2,s[c++]=(3&o)<<6|63&i;return f},P=function(e){var n,t=new Uint8Array(e),r="";for(n=0;n<t.length;n+=3)r+=Ae[t[n]>>2],r+=Ae[(3&t[n])<<4|t[n+1]>>4],r+=Ae[(15&t[n+1])<<2|t[n+2]>>6],r+=Ae[63&t[n+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r},U=function(e,n){var t="";if(e&&(t=He.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===He.call(e.buffer))){var r,o=xe;e instanceof ArrayBuffer?(r=e,o+=Be):(r=e.buffer,"[object Int8Array]"===t?o+=Le:"[object Uint8Array]"===t?o+=Fe:"[object Uint8ClampedArray]"===t?o+=Me:"[object Int16Array]"===t?o+=ze:"[object Uint16Array]"===t?o+=Ue:"[object Int32Array]"===t?o+=Pe:"[object Uint32Array]"===t?o+=qe:"[object Float32Array]"===t?o+=We:"[object Float64Array]"===t?o+=Xe:n(new Error("Failed to get type for BinaryArray"))),n(o+P(r))}else if("[object Blob]"===t){var i=new FileReader;i.onload=function(){var t=De+e.type+"~"+P(this.result);n(xe+Ce+t)},i.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),n(null,t)}},q=function(e){if(e.substring(0,Te)!==xe)return JSON.parse(e);var n,t=e.substring(Ge),r=e.substring(Te,Ge);if(r===Ce&&ke.test(t)){var o=t.match(ke);n=o[1],t=t.substring(o[0].length)}var i=z(t);switch(r){case Be:return i;case Ce:return u([i],{type:n});case Le:return new Int8Array(i);case Fe:return new Uint8Array(i);case Me:return new Uint8ClampedArray(i);case ze:return new Int16Array(i);case Ue:return new Uint16Array(i);case Pe:return new Int32Array(i);case qe:return new Uint32Array(i);case We:return new Float32Array(i);case Xe:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}},W=function(e,n,t,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,r)},X=function(e){var n=this,t={db:null};if(e)for(var r in e)t[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new _e((function(e,r){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(e){return r(e)}t.db.transaction((function(o){W(o,t,(function(){n._dbInfo=t,e()}),(function(e,n){r(n)}))}),r)}));return t.serializer=Ke,o},G=function(e,n,t,r,o,i){e.executeSql(t,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],(function(e,u){u.rows.length?i(e,a):W(e,n,(function(){e.executeSql(t,r,o,i)}),i)}),i):i(e,a)}),i)},H=function(e,n){var t=this;e=s(e);var r=new _e((function(n,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){G(t,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,t){var r=t.rows.length?t.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),n(r)}),(function(e,n){r(n)}))}))})).catch(r)}));return c(r,n),r},K=function(e,n){var t=this,r=new _e((function(n,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){G(t,o,"SELECT * FROM "+o.storeName,[],(function(t,r){for(var i=r.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),f=c.value;if(f&&(f=o.serializer.deserialize(f)),void 0!==(f=e(f,c.key,u+1)))return void n(f)}n()}),(function(e,n){r(n)}))}))})).catch(r)}));return c(r,n),r},Q=function(e,n,t){return Qe.apply(this,[e,n,t,1])},J=function(e,n){var t=this;e=s(e);var r=new _e((function(n,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){G(t,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){n()}),(function(e,n){r(n)}))}))})).catch(r)}));return c(r,n),r},V=function(e){var n=this,t=new _e((function(e,t){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){G(n,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,n){t(n)}))}))})).catch(t)}));return c(t,e),t},Y=function(e){var n=this,t=new _e((function(e,t){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){G(n,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(n,t){var r=t.rows.item(0).c;e(r)}),(function(e,n){t(n)}))}))})).catch(t)}));return c(t,e),t},Z=function(e,n){var t=this,r=new _e((function(n,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){G(t,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,t){var r=t.rows.length?t.rows.item(0).key:null;n(r)}),(function(e,n){r(n)}))}))})).catch(r)}));return c(r,n),r},$=function(e){var n=this,t=new _e((function(e,t){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){G(n,r,"SELECT key FROM "+r.storeName,[],(function(n,t){for(var r=[],o=0;o<t.rows.length;o++)r.push(t.rows.item(o).key);e(r)}),(function(e,n){t(n)}))}))})).catch(t)}));return c(t,e),t},ee=function(e){return new _e((function(n,t){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);n({db:e,storeNames:o})}),(function(e,n){t(n)}))}),(function(e){t(e)}))}))},ne=function(e,n){n=l.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var r,o=this;return r=e.name?new _e((function(n){var r;r=e.name===t.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?n({db:r,storeNames:[e.storeName]}):n(ee(r))})).then((function(e){return new _e((function(n,t){e.db.transaction((function(r){function o(e){return new _e((function(n,t){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){n()}),(function(e,n){t(n)}))}))}for(var i=[],a=0,u=e.storeNames.length;a<u;a++)i.push(o(e.storeNames[a]));_e.all(i).then((function(){n()})).catch((function(e){t(e)}))}),(function(e){t(e)}))}))})):_e.reject("Invalid arguments"),c(r,n),r},te=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}},re=function(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t},oe=function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}},ie=function(){return!oe()||localStorage.length>0},ae=function(e){var n=this,t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=re(e,n._defaultConfig),ie()?(n._dbInfo=t,t.serializer=Ke,_e.resolve()):_e.reject()},ue=function(e){var n=this,t=n.ready().then((function(){for(var e=n._dbInfo.keyPrefix,t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return c(t,e),t},ce=function(e,n){var t=this;e=s(e);var r=t.ready().then((function(){var n=t._dbInfo,r=localStorage.getItem(n.keyPrefix+e);return r&&(r=n.serializer.deserialize(r)),r}));return c(r,n),r},fe=function(e,n){var t=this,r=t.ready().then((function(){for(var n=t._dbInfo,r=n.keyPrefix,o=r.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(r)){var f=localStorage.getItem(c);if(f&&(f=n.serializer.deserialize(f)),void 0!==(f=e(f,c.substring(o),a++)))return f}}}));return c(r,n),r},se=function(e,n){var t=this,r=t.ready().then((function(){var n,r=t._dbInfo;try{n=localStorage.key(e)}catch(e){n=null}return n&&(n=n.substring(r.keyPrefix.length)),n}));return c(r,n),r},le=function(e){var n=this,t=n.ready().then((function(){for(var e=n._dbInfo,t=localStorage.length,r=[],o=0;o<t;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return c(t,e),t},de=function(e){var n=this.keys().then((function(e){return e.length}));return c(n,e),n},ve=function(e,n){var t=this;e=s(e);var r=t.ready().then((function(){var n=t._dbInfo;localStorage.removeItem(n.keyPrefix+e)}));return c(r,n),r},he=function(e,n,t){var r=this;e=s(e);var o=r.ready().then((function(){void 0===n&&(n=null);var t=n;return new _e((function(o,i){var a=r._dbInfo;a.serializer.serialize(n,(function(n,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,n),o(t)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return c(o,t),o},pe=function(e,n){if(n=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var r,o=this;return r=e.name?new _e((function(n){e.storeName?n(re(e,o._defaultConfig)):n(e.name+"/")})).then((function(e){for(var n=localStorage.length-1;n>=0;n--){var t=localStorage.key(n);0===t.indexOf(e)&&localStorage.removeItem(t)}})):_e.reject("Invalid arguments"),c(r,n),r},ye=function(e,n){e[n]=function(){var t=arguments;return e.ready().then((function(){return e[n].apply(e,t)}))}},be=function(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&($e(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]},me="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)},ge=i();"undefined"==typeof Promise&&e(3);var _e=Promise,we="local-forage-detect-blob-support",Ie=void 0,Se={},Ee=Object.prototype.toString,Ne="readonly",je="readwrite";function Oe(e,n,t,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,n);t(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return _e.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e)})).then((function(){return j(e).then((function(){Oe(e,n,t,r-1)}))})).catch(t);t(o)}}var Re={_driver:"asyncStorage",_initStorage:R,_support:a(),iterate:D,getItem:A,setItem:k,removeItem:x,clear:T,length:B,key:C,keys:L,dropInstance:F},Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",De="~~local_forage_type~",ke=/^~~local_forage_type~([^~]+)~/,xe="__lfsc__:",Te=xe.length,Be="arbf",Ce="blob",Le="si08",Fe="ui08",Me="uic8",ze="si16",Pe="si32",Ue="ur16",qe="ui32",We="fl32",Xe="fl64",Ge=Te+Be.length,He=Object.prototype.toString,Ke={serialize:U,deserialize:q,stringToBuffer:z,bufferToString:P};function Qe(e,n,t,r){var o=this;e=s(e);var i=new _e((function(i,a){o.ready().then((function(){void 0===n&&(n=null);var u=n,c=o._dbInfo;c.serializer.serialize(n,(function(n,f){f?a(f):c.db.transaction((function(t){G(t,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,n],(function(){i(u)}),(function(e,n){a(n)}))}),(function(n){if(n.code===n.QUOTA_ERR){if(r>0)return void i(Qe.apply(o,[e,u,t,r-1]));a(n)}}))}))})).catch(a)}));return c(i,t),i}var Je={_driver:"webSQLStorage",_initStorage:X,_support:M(),iterate:K,getItem:H,setItem:Q,removeItem:J,clear:V,length:Y,key:Z,keys:$,dropInstance:ne},Ve={_driver:"localStorageWrapper",_initStorage:ae,_support:te(),iterate:fe,getItem:ce,setItem:he,removeItem:ve,clear:ue,length:de,key:se,keys:le,dropInstance:pe},Ye=function(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)},Ze=function(e,n){for(var t=e.length,r=0;r<t;){if(Ye(e[r],n))return!0;r++}return!1},$e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},en={},nn={},tn={INDEXEDDB:Re,WEBSQL:Je,LOCALSTORAGE:Ve},rn=[tn.INDEXEDDB._driver,tn.WEBSQL._driver,tn.LOCALSTORAGE._driver],on=["dropInstance"],an=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(on),un={description:"",driver:rn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},cn=function(){function e(n){for(var t in o(this,e),tn)if(tn.hasOwnProperty(t)){var r=tn[t],i=r._driver;this[t]=i,en[i]||this.defineDriver(r)}this._defaultConfig=be({},un),this._config=be({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":me(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var n in e){if("storeName"===n&&(e[n]=e[n].replace(/\W/g,"_")),"version"===n&&"number"!=typeof e[n])return new Error("Database version must be a number.");this._config[n]=e[n]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,n,t){var r=new _e((function(n,t){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void t(o);for(var i=an.concat("_initStorage"),a=0,u=i.length;a<u;a++){var f=i[a];if((!Ze(on,f)||e[f])&&"function"!=typeof e[f])return void t(o)}var s=function(){for(var n=function(e){return function(){var n=new Error("Method "+e+" is not implemented by the current driver"),t=_e.reject(n);return c(t,arguments[arguments.length-1]),t}},t=0,r=on.length;t<r;t++){var o=on[t];e[o]||(e[o]=n(o))}};s();var l=function(t){en[r]&&console.info("Redefining LocalForage driver: "+r),en[r]=e,nn[r]=t,n()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,t):l(!!e._support):l(!0)}catch(e){t(e)}}));return f(r,n,t),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,n,t){var r=en[e]?_e.resolve(en[e]):_e.reject(new Error("Driver not found."));return f(r,n,t),r},e.prototype.getSerializer=function(e){var n=_e.resolve(Ke);return f(n,e),n},e.prototype.ready=function(e){var n=this,t=n._driverSet.then((function(){return null===n._ready&&(n._ready=n._initDriver()),n._ready}));return f(t,e,e),t},e.prototype.setDriver=function(e,n,t){var r=function(){a._config.driver=a.driver()},o=function(e){return a._extend(e),r(),a._ready=a._initStorage(a._config),a._ready},i=function(e){return function(){var n=0;function t(){for(;n<e.length;){var i=e[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(o).catch(t)}r();var u=new Error("No available storage method found.");return a._driverSet=_e.reject(u),a._driverSet}return t()}},a=this;$e(e)||(e=[e]);var u=this._getSupportedDrivers(e),c=null!==this._driverSet?this._driverSet.catch((function(){return _e.resolve()})):_e.resolve();return this._driverSet=c.then((function(){var e=u[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then((function(e){a._driver=e._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=i(u)}))})).catch((function(){r();var e=new Error("No available storage method found.");return a._driverSet=_e.reject(e),a._driverSet})),f(this._driverSet,n,t),this._driverSet},e.prototype.supports=function(e){return!!nn[e]},e.prototype._extend=function(e){be(this,e)},e.prototype._getSupportedDrivers=function(e){for(var n=[],t=0,r=e.length;t<r;t++){var o=e[t];this.supports(o)&&n.push(o)}return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,n=an.length;e<n;e++)ye(this,an[e])},e.prototype.createInstance=function(n){return new e(n)},e}(),fn=new cn;n.exports=fn},{3:3}]},{},[4])(4);for(var o,i=256,a=[];i--;)a[i]=(i+256).toString(16).substring(1);function u(e){var n=0,t=e||11;if(!o||i+t>512)for(o="",i=0;n<256;n++)o+=a[256*Math.random()|0];return o.substring(i,i+++t)}e(t).setDriver(e(t).LOCALSTORAGE);var c="762086220505-f0kij4nt279nqn21ukokm06j0jge2ngl.apps.googleusercontent.com",f="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",s="";(function(){var e=window.location.href.split("&code=")[1].split("&");localStorage.setItem("authorizationCode",e[0]),s=e[0];var n=new Headers;n.append("Content-Type","application/x-www-form-urlencoded");var t=new URLSearchParams;return t.append("code",e[0]),t.append("grant_type","authorization_code"),t.append("redirect_uri","https://greg.strukturart.com/redirect.html"),t.append("client_id",c),t.append("client_secret",f),fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:n,body:t,redirect:"follow"}).then((function(e){return e.json()}))})().then((function(n){localStorage.setItem("oauth_auth",JSON.stringify(n));var r=[];e(t).getItem("accounts").then((function(o){if(null==o)return r=[],!1;(r=o).push({server_url:"https://apidata.googleusercontent.com/caldav/v2/",tokens:n,authorizationCode:s,name:"Google",id:u(32),type:"oauth"}),e(t).setItem("accounts",r).then((function(){document.getElementById("success").innerText="Account successfully added to greg",setTimeout((function(){window.close()}),1e3)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}))}();
//# sourceMappingURL=oauth.js.map
